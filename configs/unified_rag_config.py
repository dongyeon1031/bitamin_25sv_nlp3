import os

PROJECT_ROOT = os.path.dirname(os.path.dirname(__file__))

# ============================================================================
# 통합 인덱스 저장 경로 (법령 + 보안/경제 통합)
# ============================================================================
UNIFIED_INDEX_DIR = os.path.join(PROJECT_ROOT, "unified_indexes")
UNIFIED_CHROMA_DIR = os.path.join(UNIFIED_INDEX_DIR, "chroma_unified")
UNIFIED_BM25_INDEX_PATH = os.path.join(UNIFIED_INDEX_DIR, "bm25_unified.pkl")
UNIFIED_DOCSTORE_PATH = os.path.join(UNIFIED_INDEX_DIR, "docstore_unified.jsonl")
UNIFIED_CHROMA_COLLECTION = "unified_chunks"

# ============================================================================
# 모델 설정 (기존과 동일)
# ============================================================================
EMBEDDING_MODEL_PATH = os.path.join(PROJECT_ROOT, "models", "bge-m3-ko")
CROSS_ENCODER_MODEL = "BAAI/bge-reranker-v2-m3"

# ============================================================================
# 검색 설정 (통합 시스템에 맞게 조정)
# ============================================================================
TOP_K_VECTOR = 50        # 벡터 검색 결과 수 (통합으로 증가)
TOP_K_BM25 = 50          # BM25 검색 결과 수 (통합으로 증가)
MERGE_TOP_K = 30         # RRF 융합 결과 수
FINAL_CONTEXT_K = 10     # 최종 컨텍스트 수 (통합으로 증가)

# ============================================================================
# 레이어드 Ensemble Reranker 설정 (RRF + CrossEncoder 가중합)
# ============================================================================
RRF_WEIGHT = 0.4           # RRF 점수 가중치 (BM25+Vector 융합 결과)
CROSS_ENCODER_WEIGHT = 0.6 # CrossEncoder 점수 가중치

# ============================================================================
# 청킹 설정 (통합 시스템에 맞게 조정)
# ============================================================================
CHUNK_SIZE_CHARS = 1100    # 법령과 보안 문서의 중간값
CHUNK_OVERLAP_CHARS = 220  # 오버랩 크기
MAX_SECTION_SIZE_CHARS = 5500

# ============================================================================
# 기타 설정
# ============================================================================
SEED = 42
ALPHA_VECTOR = 0.6

# ============================================================================
# 문서 타입 구분을 위한 메타데이터 키
# ============================================================================
LAW_DOC_TYPE = "law"           # 법령 문서
SECURITY_DOC_TYPE = "security" # 보안/경제 문서

# ============================================================================
# 질문 분류 키워드 (자동으로 적절한 문서 타입 선택)
# ============================================================================
LAW_KEYWORDS = [
    "법률", "법령", "조문", "조", "항", "호", "규정", "고시", "세칙",
    "신용정보", "전자금융", "개인정보", "정보통신망", "전자서명",
    "금융위원회", "감독규정", "업감독"
]

SECURITY_KEYWORDS = [
    "보안", "해킹", "침입", "위협", "공격", "홈네트워크", "사이버", 
    "바이러스", "악성코드", "방화벽", "암호화", "인증", "접근제어",
    "경제", "금융", "투자", "주식", "환율", "인플레이션", "GDP", 
    "경기", "시장", "용어사전"
]

# ============================================================================
# 디버깅 및 로깅 설정
# ============================================================================
DEBUG_MODE = False
LOG_LEVEL = "INFO"
